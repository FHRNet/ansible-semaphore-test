- name: Sample task to deploy tomfoolery
  hosts: all
  become: yes

  tasks:
    - name: Ensure unzip is installed
      ansible.builtin.apt:
        name: unzip
        state: latest
        update_cache: yes

    - name: Copy deployment zip to the target
      ansible.builtin.copy:
        src: tomfoolery.zip
        dest: /tmp/tomfoolery.zip

    - name: Ensure /opt/tomfoolery exists
      ansible.builtin.file:
        dest: /opt/tomfoolery
        state: directory

    - name: Unzip the deployment package
      ansible.builtin.unarchive:
        src: /tmp/tomfoolery.zip
        dest: /opt/tomfoolery
        remote_src: yes

    - name: Ensure tomfoolery is executable
      ansible.builtin.file:
        state: file
        mode: '0755'
        dest: /opt/tomfoolery/main
